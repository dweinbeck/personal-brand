---
phase: 04-builder-inbox-discord-alerts
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/api/admin/builder-inbox/route.ts
  - src/app/api/admin/builder-inbox/[id]/route.ts
  - src/components/admin/builder-inbox/BuilderInboxPage.tsx
  - src/components/admin/builder-inbox/CaptureDetailPage.tsx
  - src/app/control-center/builder-inbox/page.tsx
  - src/app/control-center/builder-inbox/[id]/page.tsx
  - src/components/admin/ControlCenterNav.tsx
autonomous: true
requirements:
  - INBOX-LIST
  - INBOX-DETAIL
  - INBOX-NAV

must_haves:
  truths:
    - "Builder Inbox list page shows captures with status filters (all, pending, processing, routed, failed)"
    - "List page shows capture type, title/transcript preview, status, destination, and relative time"
    - "Capture detail page shows full capture data, routing result, and destination reference"
    - "Both API routes use verifyAdmin for auth"
    - "ControlCenterNav includes Builder Inbox link"
    - "npm run build succeeds"
    - "npm run lint passes"
  artifacts:
    - path: "src/app/api/admin/builder-inbox/route.ts"
      provides: "GET /api/admin/builder-inbox — list captures with optional status filter"
    - path: "src/app/api/admin/builder-inbox/[id]/route.ts"
      provides: "GET /api/admin/builder-inbox/:id — single capture detail"
    - path: "src/components/admin/builder-inbox/BuilderInboxPage.tsx"
      provides: "Client component for Builder Inbox list with filter tabs"
    - path: "src/components/admin/builder-inbox/CaptureDetailPage.tsx"
      provides: "Client component for capture detail view"
---

<objective>
Create the Builder Inbox admin pages — list view with status filter tabs and detail view with full capture/routing data. Add API routes for data fetching and integrate into Control Center navigation.

Purpose: Gives the admin visibility into all captures and their routing status. Without this, there's no way to see what's been captured, how it was classified, or whether routing succeeded.

Output: 2 API routes, 2 client components, 2 page wrappers, 1 nav update.
</objective>

<execution_context>
@/Users/dweinbeck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dweinbeck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@src/components/admin/ControlCenterNav.tsx
@src/components/admin/billing/AdminBillingPage.tsx
@src/lib/auth/admin.ts
@src/lib/gsd/capture.ts
@src/lib/gsd/schemas.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create API routes for Builder Inbox</name>
  <files>
    src/app/api/admin/builder-inbox/route.ts
    src/app/api/admin/builder-inbox/[id]/route.ts
  </files>
  <action>
    Create both API routes following the verifyAdmin pattern from billing routes.

    **List route** returns captures with optional status filter.
    **Detail route** returns a single capture by ID.
  </action>
</task>

<task type="auto">
  <name>Task 2: Create BuilderInboxPage and CaptureDetailPage components</name>
  <files>
    src/components/admin/builder-inbox/BuilderInboxPage.tsx
    src/components/admin/builder-inbox/CaptureDetailPage.tsx
    src/app/control-center/builder-inbox/page.tsx
    src/app/control-center/builder-inbox/[id]/page.tsx
  </files>
  <action>
    Follow the AdminBillingPage pattern — client component with manual fetch + useState.
    Filter tabs for status, table for list, detail view with routing metadata.
  </action>
</task>

<task type="auto">
  <name>Task 3: Add Builder Inbox to ControlCenterNav</name>
  <files>
    src/components/admin/ControlCenterNav.tsx
  </files>
  <action>
    Add "Builder Inbox" link to navLinks array.
  </action>
</task>

</tasks>

<verification>
1. npm run lint — zero errors
2. npm run build — zero errors
3. npm test — all tests pass
</verification>

<success_criteria>
- Builder Inbox list page with status filter tabs
- Capture detail page with routing result display
- API routes protected with verifyAdmin
- Integrated into Control Center navigation
</success_criteria>

<output>
After completion, create `.planning/phases/04-builder-inbox-discord-alerts/04-01-SUMMARY.md`
</output>
