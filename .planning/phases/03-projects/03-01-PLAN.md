---
phase: 03-projects
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/project.ts
  - src/lib/github.ts
  - src/components/home/ProjectCard.tsx
  - src/app/projects/page.tsx
autonomous: true

must_haves:
  truths:
    - "Projects page displays cards from GitHub API with repo description, language, and topics"
    - "Project grid is responsive across mobile, tablet, and desktop"
    - "Each project card links to its GitHub repo and live demo if homepage URL is set"
    - "GitHub data is cached via ISR and revalidates hourly"
    - "Empty repos show a graceful fallback message instead of a blank page"
  artifacts:
    - path: "src/lib/github.ts"
      provides: "GitHub API fetch and transform"
      exports: ["fetchGitHubProjects"]
    - path: "src/types/project.ts"
      provides: "Project type with homepage field"
      contains: "homepage"
    - path: "src/components/home/ProjectCard.tsx"
      provides: "Project card with optional homepage link"
      contains: "homepage"
    - path: "src/app/projects/page.tsx"
      provides: "Full projects page with responsive grid"
      contains: "fetchGitHubProjects"
  key_links:
    - from: "src/app/projects/page.tsx"
      to: "src/lib/github.ts"
      via: "import fetchGitHubProjects"
      pattern: "import.*fetchGitHubProjects.*from.*lib/github"
    - from: "src/lib/github.ts"
      to: "GitHub REST API"
      via: "fetch with next.revalidate"
      pattern: "next.*revalidate.*3600"
    - from: "src/components/home/ProjectCard.tsx"
      to: "src/types/project.ts"
      via: "Project type import"
      pattern: "import.*Project.*from.*types/project"
---

<objective>
Build the GitHub data layer, update ProjectCard for homepage links, and create the full Projects page.

Purpose: Delivers the complete /projects page with live GitHub data, ISR caching, and responsive layout -- satisfying PROJ-01 through PROJ-04.
Output: Working /projects page fetching real GitHub repos via ISR, with responsive card grid and graceful empty state.
</objective>

<execution_context>
@/Users/dweinbeck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dweinbeck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-projects/03-RESEARCH.md
@src/types/project.ts
@src/components/home/ProjectCard.tsx
@src/app/projects/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: GitHub data layer and type update</name>
  <files>src/types/project.ts, src/lib/github.ts</files>
  <action>
1. Update `src/types/project.ts` -- add `homepage: string | null` field to the Project interface (after `url`).

2. Create `src/lib/github.ts` with a single exported async function `fetchGitHubProjects()`:

```typescript
import type { Project } from "@/types/project";

const GITHUB_API_URL =
  "https://api.github.com/users/dweinbeck/repos?per_page=100&sort=pushed&direction=desc";

interface GitHubRepo {
  name: string;
  description: string | null;
  language: string | null;
  stargazers_count: number;
  html_url: string;
  homepage: string | null;
  fork: boolean;
  topics: string[];
}

export async function fetchGitHubProjects(): Promise<Project[]> {
  const res = await fetch(GITHUB_API_URL, {
    next: { revalidate: 3600 },
  });

  if (!res.ok) {
    console.error(`GitHub API error: ${res.status}`);
    return [];
  }

  const repos: GitHubRepo[] = await res.json();

  return repos
    .filter((repo) => !repo.fork)
    .map((repo) => ({
      name: repo.name,
      description: repo.description ?? "No description provided",
      homepage: repo.homepage?.trim() || null,
      language: repo.language,
      stars: repo.stargazers_count,
      topics: repo.topics ?? [],
      url: repo.html_url,
    }));
}
```

Key details:
- MUST use `{ next: { revalidate: 3600 } }` on the fetch call. Next.js 16 defaults to no-cache; without this, every request hits the API.
- Filter out forks (only show original repos).
- Normalize null descriptions to "No description provided".
- Normalize empty homepage strings to null (`repo.homepage?.trim() || null`).
- Return empty array on API error (graceful degradation).
- Biome: keep imports in alphabetical order. `Project` type import comes first since `@/types` sorts before anything else.
  </action>
  <verify>
Run `npx biome check src/lib/github.ts src/types/project.ts` -- no errors.
Run `npx tsc --noEmit` -- no type errors.
  </verify>
  <done>
`fetchGitHubProjects()` is exported and returns `Project[]` with ISR caching. Project type includes `homepage: string | null`.
  </done>
</task>

<task type="auto">
  <name>Task 2: ProjectCard homepage link and Projects page</name>
  <files>src/components/home/ProjectCard.tsx, src/app/projects/page.tsx</files>
  <action>
1. Update `src/components/home/ProjectCard.tsx`:
   - Add a conditional "Live Demo" link when `project.homepage` is truthy.
   - The card's main `<a>` still links to the GitHub repo (`project.url`).
   - Add the demo link INSIDE the card, below the topics row, as a separate clickable element. Use `e.stopPropagation()` is NOT needed since both are `<a>` tags (nested links are invalid HTML). Instead, restructure: make the outer element a `<div>` with the card styles, and place TWO links inside:
     - "View on GitHub" link (always present)
     - "Live Demo" link (only when `project.homepage` is truthy)
   - Both links: `target="_blank" rel="noopener noreferrer"`, styled as small text links in the card footer.
   - Keep existing card styles: `rounded-lg border border-gray-200 p-6 transition-all duration-200 hover:shadow-md hover:border-gray-300 motion-safe:hover:-translate-y-0.5`.
   - Link styles: `text-xs text-blue-600 hover:text-blue-800 font-medium`.

Updated structure:
```tsx
<div className="rounded-lg border border-gray-200 p-6 transition-all duration-200 hover:shadow-md hover:border-gray-300 motion-safe:hover:-translate-y-0.5">
  <h3 className="font-semibold text-gray-900">{project.name}</h3>
  <p className="mt-2 text-sm text-gray-600 line-clamp-2">{project.description}</p>
  <div className="mt-4 flex items-center gap-3 text-xs text-gray-500">
    {/* language dot + topics (existing) */}
  </div>
  <div className="mt-4 flex items-center gap-4">
    <a href={project.url} target="_blank" rel="noopener noreferrer"
       className="text-xs text-blue-600 hover:text-blue-800 font-medium">
      GitHub <span className="sr-only">repository for {project.name}</span>
    </a>
    {project.homepage && (
      <a href={project.homepage} target="_blank" rel="noopener noreferrer"
         className="text-xs text-blue-600 hover:text-blue-800 font-medium">
        Live Demo <span className="sr-only">for {project.name}</span>
      </a>
    )}
  </div>
</div>
```

2. Replace `src/app/projects/page.tsx` stub with the full projects page:

```tsx
import { ProjectCard } from "@/components/home/ProjectCard";
import { fetchGitHubProjects } from "@/lib/github";

export default async function ProjectsPage() {
  const projects = await fetchGitHubProjects();

  return (
    <div className="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 py-16">
      <h1 className="text-3xl font-bold text-gray-900">Projects</h1>
      <p className="mt-2 text-gray-600">
        Open-source projects and experiments from my GitHub.
      </p>

      {projects.length > 0 ? (
        <div className="mt-10 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {projects.map((project) => (
            <ProjectCard key={project.name} project={project} />
          ))}
        </div>
      ) : (
        <p className="mt-10 text-gray-500">
          No projects to display right now. Check back soon or visit{" "}
          <a
            href="https://github.com/dweinbeck"
            target="_blank"
            rel="noopener noreferrer"
            className="text-blue-600 hover:text-blue-800"
          >
            my GitHub profile
          </a>
          .
        </p>
      )}
    </div>
  );
}
```

Key details:
- Page is an async server component (calls fetchGitHubProjects directly).
- Responsive grid: 1 col mobile, 2 cols tablet (md), 3 cols desktop (lg) -- matches home page grid.
- Graceful empty state with link to GitHub profile.
- Container matches site pattern: `mx-auto max-w-5xl px-4 sm:px-6 lg:px-8`.
- Biome: alphabetical imports (`@/components` before `@/lib`).
  </action>
  <verify>
Run `npx biome check src/components/home/ProjectCard.tsx src/app/projects/page.tsx` -- no errors.
Run `npx tsc --noEmit` -- no type errors.
Run `npm run build` -- build succeeds (confirms ISR fetch works at build time).
Visit `http://localhost:3000/projects` -- page renders (may show real repos or empty state depending on GitHub response).
  </verify>
  <done>
ProjectCard renders GitHub + optional Live Demo links. Projects page displays responsive grid of GitHub repos with ISR caching and graceful empty state.
  </done>
</task>

</tasks>

<verification>
1. `npx biome check src/lib/github.ts src/types/project.ts src/components/home/ProjectCard.tsx src/app/projects/page.tsx` -- zero errors
2. `npx tsc --noEmit` -- zero type errors
3. `npm run build` -- build succeeds (ISR fetch executes at build time)
4. `/projects` page renders with GitHub data or graceful empty state
5. Cards show repo name, description, language dot, topics, and GitHub link
6. Grid is responsive: 1 col on mobile, 2 on tablet, 3 on desktop
</verification>

<success_criteria>
- Projects page fetches real data from GitHub API with 1-hour ISR revalidation
- ProjectCard supports optional homepage/demo link
- Empty repos produce a friendly fallback message (not a blank or error page)
- All files pass Biome linting and TypeScript checks
- Build succeeds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-projects/03-01-SUMMARY.md`
</output>
