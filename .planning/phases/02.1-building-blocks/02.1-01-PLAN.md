---
phase: 02.1-building-blocks
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - next.config.ts
  - mdx-components.tsx
  - src/app/globals.css
  - src/components/layout/NavLinks.tsx
  - tsconfig.json
autonomous: true

must_haves:
  truths:
    - "MDX files are recognized and compiled by Next.js"
    - "Prose styling is applied to rendered MDX content"
    - "Building Blocks link appears in site navigation"
  artifacts:
    - path: "mdx-components.tsx"
      provides: "Required root-level MDX component overrides"
      contains: "useMDXComponents"
    - path: "next.config.ts"
      provides: "MDX compilation via createMDX wrapper"
      contains: "createMDX"
    - path: "src/app/globals.css"
      provides: "Typography plugin registration"
      contains: "@plugin"
    - path: "src/components/layout/NavLinks.tsx"
      provides: "Building Blocks nav link"
      contains: "Building Blocks"
  key_links:
    - from: "next.config.ts"
      to: "@next/mdx"
      via: "createMDX wrapper"
      pattern: "createMDX"
    - from: "src/app/globals.css"
      to: "@tailwindcss/typography"
      via: "@plugin directive"
      pattern: "@plugin.*typography"
---

<objective>
Install MDX dependencies, configure Next.js for MDX compilation, register the Tailwind typography plugin, and add "Building Blocks" to site navigation.

Purpose: Establishes the foundation that all tutorial content depends on -- without this config, MDX files won't compile and prose won't be styled.
Output: A working MDX pipeline (config + dependencies) and updated navigation.
</objective>

<execution_context>
@/Users/dweinbeck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dweinbeck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02.1-building-blocks/02.1-RESEARCH.md

@next.config.ts
@src/app/globals.css
@src/components/layout/NavLinks.tsx
@tsconfig.json
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install MDX packages and configure Next.js + Tailwind</name>
  <files>
    package.json
    next.config.ts
    mdx-components.tsx
    src/app/globals.css
    tsconfig.json
  </files>
  <action>
    1. Install all required packages:
       ```
       npm install @next/mdx @mdx-js/loader @mdx-js/react @types/mdx @tailwindcss/typography remark-gfm rehype-pretty-code shiki
       ```

    2. Update `next.config.ts` to wrap config with createMDX:
       ```typescript
       import createMDX from "@next/mdx";
       import remarkGfm from "remark-gfm";
       import rehypePrettyCode from "rehype-pretty-code";
       import type { NextConfig } from "next";

       const nextConfig: NextConfig = {
         pageExtensions: ["js", "jsx", "md", "mdx", "ts", "tsx"],
         images: {
           qualities: [25, 50, 75, 100],
         },
       };

       const withMDX = createMDX({
         options: {
           remarkPlugins: [remarkGfm],
           rehypePlugins: [[rehypePrettyCode, { theme: "github-light" }]],
         },
       });

       export default withMDX(nextConfig);
       ```
       Note: rehype-pretty-code uses shiki under the hood. The `theme: "github-light"` keeps it consistent with the light design. Use array syntax `[[plugin, options]]` for plugins with config.

    3. Create `mdx-components.tsx` at the project root (next to package.json). This file is REQUIRED by @next/mdx:
       ```typescript
       import type { MDXComponents } from "mdx/types";

       export function useMDXComponents(components: MDXComponents = {}): MDXComponents {
         return {
           ...components,
         };
       }
       ```

    4. Update `src/app/globals.css` -- add `@plugin "@tailwindcss/typography";` right after the `@import "tailwindcss";` line. Do NOT remove any existing content.

    5. Update `tsconfig.json` -- add `"**/*.mdx"` to the `include` array so TypeScript recognizes MDX files.
  </action>
  <verify>
    Run `npm run build` -- should complete without errors. The build confirms MDX compilation pipeline works and typography plugin is registered.
  </verify>
  <done>
    - @next/mdx, @mdx-js/loader, @mdx-js/react, @types/mdx, @tailwindcss/typography, remark-gfm, rehype-pretty-code, shiki are in package.json
    - next.config.ts uses createMDX wrapper with pageExtensions including "mdx"
    - mdx-components.tsx exists at project root with useMDXComponents export
    - globals.css has @plugin "@tailwindcss/typography"
    - tsconfig.json includes "**/*.mdx"
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Building Blocks link to navigation</name>
  <files>src/components/layout/NavLinks.tsx</files>
  <action>
    Update the `links` array in `src/components/layout/NavLinks.tsx` to add "Building Blocks" between "Projects" and "Writing":

    ```typescript
    const links = [
      { name: "Home", href: "/" },
      { name: "Projects", href: "/projects" },
      { name: "Building Blocks", href: "/building-blocks" },
      { name: "Writing", href: "/writing" },
      { name: "Assistant", href: "/assistant" },
      { name: "Contact", href: "/contact" },
    ];
    ```

    This brings the nav to 6 items. After adding, visually check at the `md:` breakpoint (768px). If items wrap on desktop, reduce `px-3` to `px-2` in the desktop nav link className. The existing `isActive` function uses `pathname.startsWith(href)` for non-root routes, so `/building-blocks/anything` will correctly highlight.
  </action>
  <verify>
    Run `npm run build` -- no errors. Visually confirm by running `npm run dev` and checking that "Building Blocks" appears in both desktop and mobile nav.
  </verify>
  <done>
    - "Building Blocks" link appears in the navigation between "Projects" and "Writing"
    - Desktop nav does not wrap at md breakpoint
    - Mobile hamburger menu includes the new link
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `npm run dev` shows "Building Blocks" in navigation
3. mdx-components.tsx exists at project root
4. next.config.ts has pageExtensions and createMDX wrapper
</verification>

<success_criteria>
- All MDX packages installed and configured
- Typography plugin registered in Tailwind v4 CSS-first config
- Navigation updated with Building Blocks link
- Build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/02.1-building-blocks/02.1-01-SUMMARY.md`
</output>
