---
phase: 02-fix-brand-scraper-asset-downloads-color-accuracy-color-labels-and-company-name-extraction
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/brand-scraper/colors.ts
  - src/components/tools/brand-scraper/BrandCardColors.tsx
  - src/components/admin/brand-scraper/ColorPaletteCard.tsx
autonomous: true
requirements:
  - COLOR-LABELS
  - COLOR-ACCURACY
must_haves:
  truths:
    - "Each color swatch displays a human-readable color name (e.g., Red, Navy Blue)"
    - "Color role labels include Text for the 4th palette position"
    - "Admin color palette view also shows color names"
    - "Existing color display still works for brands with any number of palette colors"
  artifacts:
    - path: "src/lib/brand-scraper/colors.ts"
      provides: "getColorName utility mapping hex to human-readable name"
      exports: ["getColorName"]
      min_lines: 10
    - path: "src/components/tools/brand-scraper/BrandCardColors.tsx"
      provides: "Color swatches with name + hex + role labels"
      contains: "getColorName"
    - path: "src/components/admin/brand-scraper/ColorPaletteCard.tsx"
      provides: "Admin color palette with color names"
      contains: "getColorName"
  key_links:
    - from: "src/components/tools/brand-scraper/BrandCardColors.tsx"
      to: "src/lib/brand-scraper/colors.ts"
      via: "import getColorName"
      pattern: "import.*getColorName.*from.*colors"
    - from: "src/components/admin/brand-scraper/ColorPaletteCard.tsx"
      to: "src/lib/brand-scraper/colors.ts"
      via: "import getColorName"
      pattern: "import.*getColorName.*from.*colors"
---

<objective>
Add human-readable color names to all color palette displays and expand role labels to include "Text".

Purpose: Users see hex codes and positional role labels (Primary/Secondary/Accent) but want actual color names (e.g., "Red", "Navy Blue", "Forest Green") to quickly understand what was found. The 4th palette position should also be labeled "Text" since many brands have a primary, secondary, accent, and text color. This uses the `color-namer` npm library for perceptually accurate hex-to-name mapping.

Output: New color naming utility, updated user and admin color displays.
</objective>

<execution_context>
@/Users/dweinbeck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dweinbeck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/tools/brand-scraper/BrandCardColors.tsx
@src/components/admin/brand-scraper/ColorPaletteCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install color-namer and create color naming utility</name>
  <files>
    src/lib/brand-scraper/colors.ts
  </files>
  <action>
    1. Install the `color-namer` package:
       ```
       npm install color-namer
       ```
       Note: If TypeScript types are not bundled, also install `@types/color-namer` if it exists. If no types package exists, create a minimal type declaration at the top of the file or in a `.d.ts` file.

    2. Create `src/lib/brand-scraper/colors.ts`:
       ```typescript
       import namer from "color-namer";

       /**
        * Returns the closest human-readable color name for a hex value.
        * Uses the "basic" list (147 recognizable names like Red, Blue, Green)
        * with Delta-E perceptual distance for accuracy.
        */
       export function getColorName(hex: string): string {
         try {
           const result = namer(hex, { pick: ["basic"] });
           return result.basic[0]?.name ?? "Unknown";
         } catch {
           return "Unknown";
         }
       }
       ```

    3. The `pick: ["basic"]` option limits the library to its "basic" name list (~147 names) which gives broad, recognizable names. Do NOT use the full library (multiple lists = larger bundle). The try/catch handles invalid hex input gracefully.
  </action>
  <verify>
    - `npm run build` passes (confirms color-namer import resolves, types compile)
    - `npm run lint` passes
    - File exists: `src/lib/brand-scraper/colors.ts`
    - Grep: `getColorName` is exported
  </verify>
  <done>
    A `getColorName(hex)` utility exists in `src/lib/brand-scraper/colors.ts` that returns a human-readable color name using the color-namer library's "basic" list. The function handles errors gracefully and returns "Unknown" on failure.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add color names to BrandCardColors and ColorPaletteCard, expand role labels</name>
  <files>
    src/components/tools/brand-scraper/BrandCardColors.tsx
    src/components/admin/brand-scraper/ColorPaletteCard.tsx
  </files>
  <action>
    **BrandCardColors.tsx (user-facing brand card):**
    1. Add import: `import { getColorName } from "@/lib/brand-scraper/colors";`
    2. Update the `inferRole` function to return "Text" for index 3:
       ```
       if (index === 3) return "Text";
       ```
       Keep the existing Primary (0), Secondary (1), Accent (2) labels. Return "" for index > 3.
    3. Inside the `.map()` rendering loop, compute the color name:
       ```
       const colorName = getColorName(entry.value.hex);
       ```
    4. Display the color name between the hex value and the role label. The visual order for each swatch should be:
       - Color swatch (existing square)
       - Color name (new — e.g., "Red") — use `text-xs text-text-primary font-medium`
       - Hex code (existing — e.g., "#FF0000")
       - Role label (existing — e.g., "Primary") — keep existing styling

    **ColorPaletteCard.tsx (admin view):**
    1. Add import: `import { getColorName } from "@/lib/brand-scraper/colors";`
    2. Inside the `.map()` rendering loop, compute the color name:
       ```
       const colorName = getColorName(entry.value.hex);
       ```
    3. Display the color name in the card. Currently each entry shows: hex code + role label + confidence badge. Add the color name ABOVE the hex code:
       ```
       <span className="block text-xs font-medium text-text-primary">
         {colorName}
       </span>
       ```
       So the visual stack becomes: color name → hex code → role label, with confidence badge on the right.
  </action>
  <verify>
    - `npm run lint` passes
    - `npm run build` passes
    - `npm test` passes
    - Both components import `getColorName`
    - BrandCardColors.tsx contains "Text" in the inferRole function
    - Both components render `colorName` in their JSX
  </verify>
  <done>
    Every color swatch in both the user brand card and admin palette views shows a human-readable color name (e.g., "Red", "Navy Blue") alongside the hex code. The 4th palette position is labeled "Text". Both components import from the shared `getColorName` utility.
  </done>
</task>

</tasks>

<verification>
- `npm run lint && npm run build && npm test` — all pass
- `src/lib/brand-scraper/colors.ts` exists and exports `getColorName`
- `grep -r "getColorName" src/components/tools/brand-scraper/BrandCardColors.tsx` returns matches
- `grep -r "getColorName" src/components/admin/brand-scraper/ColorPaletteCard.tsx` returns matches
- `grep "Text" src/components/tools/brand-scraper/BrandCardColors.tsx` confirms Text role label
</verification>

<success_criteria>
All color palette displays throughout the app show human-readable color names alongside hex codes. Role labels are expanded to include "Text" for the 4th color. The color-namer library is used for perceptually accurate naming.
</success_criteria>

<output>
After completion, create `.planning/phases/02-fix-brand-scraper-asset-downloads-color-accuracy-color-labels-and-company-name-extraction/02-02-SUMMARY.md`
</output>
