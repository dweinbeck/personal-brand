---
phase: 37-chatbot-popup-widget
plan: 02
type: execute
wave: 2
depends_on: ["37-01"]
files_modified:
  - src/app/assistant/page.tsx
autonomous: false

must_haves:
  truths:
    - "The standalone /assistant page no longer exists — visiting /assistant redirects to the home page"
  artifacts:
    - path: "src/app/assistant/page.tsx"
      provides: "Redirect from /assistant to / (home page)"
      min_lines: 3
  key_links:
    - from: "src/app/assistant/page.tsx"
      to: "/"
      via: "Next.js redirect() function"
      pattern: "redirect.*/"
---

<objective>
Remove the standalone /assistant page and replace it with a redirect to the home page.

Purpose: The chatbot is now accessible from every page via the popup widget. The standalone /assistant page is redundant and should redirect visitors (including anyone who bookmarked it) to the home page, where they can use the popup.

Output: /assistant redirects to /, no standalone assistant page remains.
</objective>

<execution_context>
@/Users/dweinbeck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dweinbeck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/37-chatbot-popup-widget/37-01-SUMMARY.md

@src/app/assistant/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace /assistant page with redirect to home</name>
  <files>
    src/app/assistant/page.tsx
  </files>
  <action>
Replace the contents of `src/app/assistant/page.tsx` with a server-side redirect to the home page.

Use Next.js `redirect()` from `next/navigation`:

```tsx
import { redirect } from "next/navigation";

export default function AssistantPage() {
  redirect("/");
}
```

This is a server component (no "use client" directive) that performs a 307 redirect before any content renders. Remove all existing imports (ChatInterface, Metadata) and the metadata export.

Do NOT delete the file — keep it as a redirect so bookmarks and crawlers get a proper redirect response rather than a 404.
  </action>
  <verify>
Run `npm run build` — passes. Run `npm run lint` — passes. Run `npm test` — all tests pass. Verify the file contains `redirect("/")` (grep). Verify the file does NOT contain `ChatInterface` (grep).
  </verify>
  <done>
Visiting /assistant performs a server-side redirect to /. No standalone chat page renders. Bookmarks are gracefully handled.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify complete chatbot popup widget behavior</name>
  <files>none (verification only)</files>
  <action>
Human verifies the complete chatbot popup widget feature end-to-end. This checkpoint covers both Plan 01 (popup widget creation) and Plan 02 (redirect) together.

What was built:
1. "Ask My Assistant" in navbar toggles a floating chat panel (bottom-right)
2. Chat widget persists across page navigation
3. Closing and reopening preserves conversation history
4. /assistant now redirects to home page

Verification steps:
1. Start dev server: `npm run dev`
2. Visit http://localhost:3000
3. Click "Ask My Assistant" in the navbar — a floating chat panel should appear bottom-right
4. Type a message and send it (e.g., "What projects has Dan built?")
5. Wait for a response (or verify the loading state works)
6. Navigate to a different page (e.g., click "Apps" in navbar) — the popup should stay open with the conversation intact
7. Click the X button on the popup — it should close
8. Click "Ask My Assistant" again — the popup should reopen with the previous conversation still visible
9. Visit http://localhost:3000/assistant directly — it should redirect to the home page
10. On mobile viewport (resize browser to less than 768px), verify the popup fills the screen properly
  </action>
  <verify>
User types "approved" or describes issues to fix.
  </verify>
  <done>
User confirms: popup opens from navbar, persists across navigation, preserves conversation on close/reopen, /assistant redirects to home page, mobile layout works.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` passes
2. `npm run lint` passes
3. `npm test` passes
4. `/assistant` redirects to `/` (not 404)
5. Human verification of popup behavior confirmed
</verification>

<success_criteria>
- /assistant redirects to / with a proper redirect response
- No references to the old standalone ChatInterface page remain in navigation
- Human confirms: popup opens, persists across navigation, preserves conversation, closes/reopens correctly
</success_criteria>

<output>
After completion, create `.planning/phases/37-chatbot-popup-widget/37-02-SUMMARY.md`
</output>
