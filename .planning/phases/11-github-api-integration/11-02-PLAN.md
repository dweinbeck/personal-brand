---
phase: 11-github-api-integration
plan: 02
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - src/app/projects/page.tsx
  - src/app/projects/[slug]/page.tsx
  - src/components/projects/DetailedProjectCard.tsx
  - src/components/projects/ReadmeRenderer.tsx
autonomous: true

must_haves:
  truths:
    - "Projects page displays live GitHub data, not hardcoded placeholders"
    - "Each project card links to /projects/[slug]"
    - "Project detail page renders full README as markdown"
    - "Project detail page shows tech stack, dates, and links"
  artifacts:
    - path: "src/app/projects/page.tsx"
      provides: "Projects list fetching from GitHub API"
      contains: "fetchAllProjects"
    - path: "src/app/projects/[slug]/page.tsx"
      provides: "Dynamic project detail page"
      exports: ["generateStaticParams"]
    - path: "src/components/projects/ReadmeRenderer.tsx"
      provides: "README markdown rendering component"
      contains: "react-markdown"
  key_links:
    - from: "src/app/projects/page.tsx"
      to: "src/lib/github.ts"
      via: "fetchAllProjects import"
      pattern: "import.*fetchAllProjects.*github"
    - from: "src/app/projects/[slug]/page.tsx"
      to: "src/lib/github.ts"
      via: "fetchProjectBySlug and fetchReadme"
      pattern: "fetchProjectBySlug|fetchReadme"
    - from: "src/components/projects/ReadmeRenderer.tsx"
      to: "react-markdown"
      via: "Markdown component"
      pattern: "import.*Markdown.*react-markdown"
---

<objective>
Wire the projects page and create project detail pages with README rendering.

Purpose: Deliver PROJ-01 (live GitHub data on projects page), PROJ-02 (individual detail pages), and PROJ-03 (detail page shows README, tech stack, dates, links).

Output: Projects page fetches from GitHub API, each card links to /projects/[slug], detail page renders full README with project metadata.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/11-github-api-integration/11-RESEARCH.md

@src/app/projects/page.tsx
@src/components/projects/DetailedProjectCard.tsx
@src/app/building-blocks/[slug]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update projects page to use live GitHub data</name>
  <files>
    - src/app/projects/page.tsx
    - src/components/projects/DetailedProjectCard.tsx
  </files>
  <action>
1. Update `src/components/projects/DetailedProjectCard.tsx`:
   - Change the interface to use EnrichedProject from types
   - Add detailUrl as `/projects/${project.slug}`
   - Format dates using Intl.DateTimeFormat:
     ```typescript
     const formatDate = (isoDate: string | null) => {
       if (!isoDate) return "Unknown";
       return new Intl.DateTimeFormat("en-US", {
         month: "short",
         year: "numeric",
       }).format(new Date(isoDate));
     };
     ```
   - Display `Started: {createdAt}` and `Last updated: {pushedAt}`
   - Keep existing status/visibility badges and styling

2. Update `src/app/projects/page.tsx`:
   - Remove hardcoded `projects` array
   - Import and call `fetchAllProjects()` from "@/lib/github"
   - Pass enriched projects to ProjectsFilter
   - Keep existing page structure and metadata

   ```typescript
   import { fetchAllProjects } from "@/lib/github";

   export default async function ProjectsPage() {
     const projects = await fetchAllProjects();
     // ... rest of component
   }
   ```

3. Update ProjectsFilter if needed to accept EnrichedProject[] instead of DetailedProject[].
  </action>
  <verify>
    - `npm run build` passes
    - Visit /projects in dev mode - should show project cards with live data
    - Cards display dates from GitHub API (created/pushed dates)
  </verify>
  <done>
    - Projects page fetches from fetchAllProjects()
    - Cards show live GitHub data (dates, etc.)
    - Each card has correct detailUrl to /projects/[slug]
  </done>
</task>

<task type="auto">
  <name>Task 2: Create project detail page with README rendering</name>
  <files>
    - src/app/projects/[slug]/page.tsx
    - src/components/projects/ReadmeRenderer.tsx
  </files>
  <action>
1. Create `src/components/projects/ReadmeRenderer.tsx`:
   ```typescript
   import Markdown from "react-markdown";
   import remarkGfm from "remark-gfm";

   interface ReadmeRendererProps {
     content: string;
   }

   export function ReadmeRenderer({ content }: ReadmeRendererProps) {
     return (
       <div className="prose prose-neutral max-w-none">
         <Markdown remarkPlugins={[remarkGfm]}>
           {content}
         </Markdown>
       </div>
     );
   }
   ```

2. Create `src/app/projects/[slug]/page.tsx`:
   - Follow pattern from building-blocks/[slug]/page.tsx
   - Use generateStaticParams from fetchAllProjects
   - Use dynamicParams = true (allow ISR for new projects)
   - Fetch project by slug, fetch README
   - Display project header with:
     - Name (h1)
     - Description
     - Status badge + visibility badge
     - Tech tags (from topics or tags)
     - Dates: Created and Last Updated
     - Links: GitHub repo (if public) + Live site (if homepage exists)
   - Render README below header

   ```typescript
   import type { Metadata } from "next";
   import { notFound } from "next/navigation";
   import { fetchAllProjects, fetchProjectBySlug, fetchReadme } from "@/lib/github";
   import { ReadmeRenderer } from "@/components/projects/ReadmeRenderer";
   import { Button } from "@/components/ui/Button";

   export const revalidate = 3600; // 1 hour ISR

   export async function generateStaticParams() {
     const projects = await fetchAllProjects();
     return projects.map((p) => ({ slug: p.slug }));
   }

   export const dynamicParams = true;

   interface PageProps {
     params: Promise<{ slug: string }>;
   }

   export async function generateMetadata({ params }: PageProps): Promise<Metadata> {
     const { slug } = await params;
     const project = await fetchProjectBySlug(slug);
     if (!project) return {};
     return {
       title: `${project.name} | Projects`,
       description: project.description,
     };
   }

   export default async function ProjectDetailPage({ params }: PageProps) {
     const { slug } = await params;
     const project = await fetchProjectBySlug(slug);

     if (!project) notFound();

     // Fetch README if public repo
     let readme: string | null = null;
     if (project.repo) {
       const [owner, repo] = project.repo.split("/");
       readme = await fetchReadme(owner, repo);
     }

     // ... render page
   }
   ```

3. Style the detail page header:
   - Use existing design patterns (navy/gold, badges, etc.)
   - Include back link to /projects
   - Display external links as buttons
  </action>
  <verify>
    - `npm run build` passes
    - Visit /projects/personal-brand (or another public repo slug) in dev
    - Should show project header with all metadata
    - Should render README content with proper markdown formatting
    - GitHub and Live Site links work
  </verify>
  <done>
    - /projects/[slug] route exists and renders
    - generateStaticParams pre-renders all project slugs
    - Detail page shows name, description, status, visibility, tags, dates
    - Detail page shows GitHub link (if public) and Live Site link (if homepage)
    - README renders with react-markdown + remark-gfm
  </done>
</task>

</tasks>

<verification>
After completing all tasks:
1. Run `npm run build` - should succeed with static params generated
2. Run `npm run dev` and test:
   - /projects shows live data from GitHub
   - Click a project card - navigates to /projects/[slug]
   - Detail page shows full project info + README
   - Private projects show curated data only, no README section
3. Check that dates format correctly (e.g., "Oct 2025")
</verification>

<success_criteria>
- Projects page displays live GitHub data (not hardcoded)
- Each project card links to /projects/[slug]
- Project detail page shows: name, description, status, visibility, tags, created date, last updated date
- Project detail page shows GitHub link (if public) and Live Site link (if exists)
- README renders as formatted markdown with GFM support (tables, task lists)
- Build succeeds with all static params generated
</success_criteria>

<output>
After completion, create `.planning/phases/11-github-api-integration/11-02-SUMMARY.md`
</output>
