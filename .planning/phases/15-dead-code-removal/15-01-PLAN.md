---
phase: 15-dead-code-removal
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/utils/handoff.ts (new - moved from src/lib/assistant/handoff.ts)
  - src/components/assistant/HumanHandoff.tsx (import path update)
  - src/lib/assistant/handoff.ts (deleted)
  - src/app/control-center/assistant/page.tsx (deleted)
  - src/app/control-center/assistant/facts/page.tsx (deleted)
  - src/app/api/assistant/facts/route.ts (deleted)
  - src/app/api/assistant/feedback/route.ts (deleted)
  - src/app/api/assistant/prompt-versions/route.ts (deleted)
  - src/app/api/assistant/reindex/route.ts (deleted)
  - src/components/admin/AssistantAnalytics.tsx (deleted)
  - src/components/admin/FactsEditor.tsx (deleted)
  - src/components/admin/PromptVersions.tsx (deleted)
  - src/components/admin/ReindexButton.tsx (deleted)
  - src/components/admin/TopQuestions.tsx (deleted)
  - src/components/admin/UnansweredQuestions.tsx (deleted)
autonomous: true

must_haves:
  truths:
    - "HumanHandoff component still renders and links correctly after handoff.ts is moved"
    - "No assistant admin pages exist under /control-center/assistant/"
    - "No assistant admin API routes exist (facts, feedback, prompt-versions, reindex)"
    - "Control center main page and todoist pages still work (AdminGuard, RepoCard, TodoistBoard, TodoistProjectCard preserved)"
  artifacts:
    - path: "src/lib/utils/handoff.ts"
      provides: "Mailto link builder for HumanHandoff component"
      contains: "buildMailtoLink"
    - path: "src/components/assistant/HumanHandoff.tsx"
      provides: "Human handoff button"
      contains: "from \"@/lib/utils/handoff\""
  key_links:
    - from: "src/components/assistant/HumanHandoff.tsx"
      to: "src/lib/utils/handoff.ts"
      via: "import { buildMailtoLink }"
      pattern: "from \"@/lib/utils/handoff\""
    - from: "src/app/control-center/layout.tsx"
      to: "src/components/admin/AdminGuard.tsx"
      via: "import AdminGuard"
      pattern: "AdminGuard"
---

<objective>
Move handoff.ts to a safe location and delete all assistant admin surface (pages, API routes, components).

Purpose: Remove the admin panel and API routes that served the old assistant backend. These pages and routes depend on library files that will be deleted in Plan 02, so they must be removed first to avoid transient build failures. Moving handoff.ts first prevents breaking the HumanHandoff component during bulk deletion.

Output: Clean build with no assistant admin pages, no assistant admin API routes, and no assistant-specific admin components. HumanHandoff still works via relocated handoff.ts.
</objective>

<execution_context>
@/Users/dweinbeck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dweinbeck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-dead-code-removal/15-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Move handoff.ts and update import</name>
  <files>
    src/lib/utils/handoff.ts (new)
    src/components/assistant/HumanHandoff.tsx (modify)
    src/lib/assistant/handoff.ts (delete)
  </files>
  <action>
    1. Create directory `src/lib/utils/` if it does not exist.
    2. Copy `src/lib/assistant/handoff.ts` to `src/lib/utils/handoff.ts`. The file content does NOT change -- only the location.
    3. Update the import in `src/components/assistant/HumanHandoff.tsx`:
       - Change: `import { buildMailtoLink } from "@/lib/assistant/handoff";`
       - To: `import { buildMailtoLink } from "@/lib/utils/handoff";`
    4. Delete `src/lib/assistant/handoff.ts`.
    5. Run `npm run build` to verify no broken imports.

    IMPORTANT: Do NOT modify any code inside handoff.ts or HumanHandoff.tsx beyond the import path change. The handoff.ts file imports from `@/lib/constants` -- this import remains valid at the new location.
  </action>
  <verify>
    `npm run build` passes with zero errors.
    `grep -r "lib/assistant/handoff" src/` returns zero results (no stale imports remain).
  </verify>
  <done>
    handoff.ts lives at src/lib/utils/handoff.ts, HumanHandoff.tsx imports from the new path, the old file is deleted, and the build passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Delete assistant admin pages, API routes, and components</name>
  <files>
    src/app/control-center/assistant/page.tsx (delete)
    src/app/control-center/assistant/facts/page.tsx (delete)
    src/app/api/assistant/facts/route.ts (delete)
    src/app/api/assistant/feedback/route.ts (delete)
    src/app/api/assistant/prompt-versions/route.ts (delete)
    src/app/api/assistant/reindex/route.ts (delete)
    src/components/admin/AssistantAnalytics.tsx (delete)
    src/components/admin/FactsEditor.tsx (delete)
    src/components/admin/PromptVersions.tsx (delete)
    src/components/admin/ReindexButton.tsx (delete)
    src/components/admin/TopQuestions.tsx (delete)
    src/components/admin/UnansweredQuestions.tsx (delete)
  </files>
  <action>
    Delete the following directories and files. Use `rm -rf` for directories, `rm` for individual files.

    Admin pages (delete entire directory):
    - `rm -rf src/app/control-center/assistant/` (contains page.tsx and facts/page.tsx)

    Admin API routes (delete each subdirectory but NOT the parent or chat/):
    - `rm -rf src/app/api/assistant/facts/`
    - `rm -rf src/app/api/assistant/feedback/`
    - `rm -rf src/app/api/assistant/prompt-versions/`
    - `rm -rf src/app/api/assistant/reindex/`

    CRITICAL: Do NOT delete `src/app/api/assistant/chat/` -- that is the ACTIVE FastAPI proxy route.

    Admin components (delete by name, NOT the entire directory):
    - `rm src/components/admin/AssistantAnalytics.tsx`
    - `rm src/components/admin/FactsEditor.tsx`
    - `rm src/components/admin/PromptVersions.tsx`
    - `rm src/components/admin/ReindexButton.tsx`
    - `rm src/components/admin/TopQuestions.tsx`
    - `rm src/components/admin/UnansweredQuestions.tsx`

    CRITICAL: Do NOT delete these files in src/components/admin/:
    - AdminGuard.tsx (used by control-center/layout.tsx)
    - RepoCard.tsx (used by control-center/page.tsx)
    - TodoistBoard.tsx (used by todoist pages)
    - TodoistProjectCard.tsx (used by control-center/page.tsx)

    After all deletions, run `npm run build` to verify no broken imports.
  </action>
  <verify>
    `npm run build` passes with zero errors.
    `ls src/app/control-center/assistant/ 2>/dev/null` returns nothing (directory gone).
    `ls src/app/api/assistant/` shows ONLY `chat/` remaining.
    `ls src/components/admin/` shows ONLY AdminGuard.tsx, RepoCard.tsx, TodoistBoard.tsx, TodoistProjectCard.tsx.
  </verify>
  <done>
    All assistant admin pages, API routes, and assistant-specific admin components are deleted. The control center layout, main page, and todoist pages are unaffected. The active chat API route is preserved. Build passes cleanly.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` -- zero errors, site builds successfully
2. `npm run lint` -- zero errors
3. `ls src/app/api/assistant/` -- only `chat/` directory remains
4. `ls src/components/admin/` -- only AdminGuard.tsx, RepoCard.tsx, TodoistBoard.tsx, TodoistProjectCard.tsx remain
5. `ls src/app/control-center/assistant/ 2>/dev/null` -- directory does not exist
6. `grep -r "lib/assistant/handoff" src/` -- zero results
7. `grep -r "from \"@/lib/utils/handoff\"" src/` -- shows HumanHandoff.tsx
</verification>

<success_criteria>
- Build passes with zero `Module not found` errors
- HumanHandoff component works (import resolves to src/lib/utils/handoff.ts)
- No assistant admin pages exist
- No assistant admin API routes exist (facts, feedback, prompt-versions, reindex)
- Control center main page, layout, and todoist pages are unaffected
- Active chat route (src/app/api/assistant/chat/route.ts) is preserved
</success_criteria>

<output>
After completion, create `.planning/phases/15-dead-code-removal/15-01-SUMMARY.md`
</output>
