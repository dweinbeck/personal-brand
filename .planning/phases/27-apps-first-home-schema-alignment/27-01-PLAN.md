---
phase: 27-apps-first-home-schema-alignment
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - next.config.ts
  - src/components/layout/NavLinks.tsx
  - src/app/sitemap.ts
  - src/app/not-found.tsx
  - src/app/projects/page.tsx (DELETE)
  - src/app/projects/[slug]/page.tsx (DELETE)
  - src/components/projects/ProjectsFilter.tsx (DELETE)
  - src/components/projects/DetailedProjectCard.tsx (DELETE)
  - src/components/projects/ReadmeRenderer.tsx (DELETE)
autonomous: true

must_haves:
  truths:
    - "Visiting /projects redirects to / with HTTP 301"
    - "Visiting /projects/any-slug redirects to / with HTTP 301"
    - "Navbar shows Home, About, Building Blocks, Custom GPTs, Apps, Assistant, Contact (no Projects)"
    - "Control Center nav item appears only when signed in as admin"
    - "404 page navigation links do not include Projects"
    - "Sitemap XML does not contain any /projects URLs"
  artifacts:
    - path: "next.config.ts"
      provides: "Redirect rules for /projects and /projects/:slug"
      contains: '"/projects"'
    - path: "src/components/layout/NavLinks.tsx"
      provides: "Updated nav without Projects entry"
    - path: "src/app/sitemap.ts"
      provides: "Sitemap without project URLs or fetchAllProjects import"
    - path: "src/app/not-found.tsx"
      provides: "404 page with updated navigation links"
  key_links:
    - from: "next.config.ts"
      to: "/"
      via: "redirects() function"
      pattern: 'source.*projects.*destination.*"/"'
    - from: "src/components/layout/NavLinks.tsx"
      to: "baseLinks array"
      via: "array entries"
      pattern: "Building Blocks.*Custom GPTs.*Apps.*Assistant.*Contact"
---

<objective>
Remove the Projects section entirely and clean up all references across navigation, routing, sitemap, and 404 page.

Purpose: Eliminates dead routes and broken links from the removed Projects section, ensuring no visitor encounters a 404 on /projects paths and the navbar reflects the current site structure.
Output: Redirect rules for /projects paths, cleaned-up NavLinks, sitemap, and not-found page, plus deletion of all project route and component files.
</objective>

<execution_context>
@/Users/dweinbeck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dweinbeck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/27-apps-first-home-schema-alignment/27-RESEARCH.md

@next.config.ts
@src/components/layout/NavLinks.tsx
@src/app/sitemap.ts
@src/app/not-found.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add /projects redirects and delete project route files</name>
  <files>
    next.config.ts
    src/app/projects/page.tsx (DELETE)
    src/app/projects/[slug]/page.tsx (DELETE)
    src/components/projects/ProjectsFilter.tsx (DELETE)
    src/components/projects/DetailedProjectCard.tsx (DELETE)
    src/components/projects/ReadmeRenderer.tsx (DELETE)
  </files>
  <action>
    1. In `next.config.ts`, add two redirect entries to the existing `redirects()` array, following the exact pattern already used for `/tutorials` -> `/building-blocks`:
       ```typescript
       { source: "/projects", destination: "/", permanent: true },
       { source: "/projects/:slug", destination: "/", permanent: true },
       ```
       Replace the commented-out placeholder block ("Add future redirects here") with these entries.

    2. Delete these 5 files (they are only used by the project pages being removed):
       - `src/app/projects/page.tsx`
       - `src/app/projects/[slug]/page.tsx`
       - `src/components/projects/ProjectsFilter.tsx`
       - `src/components/projects/DetailedProjectCard.tsx`
       - `src/components/projects/ReadmeRenderer.tsx`

    3. After deletion, also delete the now-empty directories:
       - `src/app/projects/` (and `[slug]/` subdirectory)
       - `src/components/projects/`
  </action>
  <verify>
    Run `npm run build` to confirm no broken imports referencing deleted files.
    Confirm `src/app/projects/` directory no longer exists.
    Confirm `src/components/projects/` directory no longer exists.
  </verify>
  <done>
    /projects and /projects/:slug have permanent redirect rules to /. All 5 project route and component files are deleted. Build succeeds with no broken imports from these deletions.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update NavLinks, sitemap, and not-found page</name>
  <files>
    src/components/layout/NavLinks.tsx
    src/app/sitemap.ts
    src/app/not-found.tsx
  </files>
  <action>
    1. In `src/components/layout/NavLinks.tsx`:
       - Remove the `{ name: "Projects", href: "/projects" }` entry from the `baseLinks` array (line 13).
       - The resulting order should be: Home, About, Building Blocks, Custom GPTs, Apps, Assistant, Contact.
       - Do NOT touch the admin-only Control Center logic (lines 26-31) -- it already works correctly.

    2. In `src/app/sitemap.ts`:
       - Remove the `import { fetchAllProjects } from "@/lib/github"` import (line 3).
       - Remove the `const projects = await fetchAllProjects()` call (line 10).
       - Remove the entire `projectUrls` mapping block (lines 36-42).
       - Remove the static `/projects` URL entry from the return array (lines 57-62, the entry with `url: ${BASE_URL}/projects`).
       - Remove `...projectUrls` from the return array spread (line 102).
       - Keep all other sitemap entries (tutorials, accomplishments, static pages).

    3. In `src/app/not-found.tsx`:
       - Update the `navigationLinks` array (lines 14-20):
         - Remove `{ href: "/projects", label: "Projects" }`
         - Replace `{ href: "/writing", label: "Writing" }` with `{ href: "/apps", label: "Apps" }` (Writing page is less useful; Apps is the new primary content)
         - Final array: Home, Building Blocks, Apps, Contact
  </action>
  <verify>
    Run `npm run build` -- must succeed with no errors.
    Run `npm run lint` -- must pass.
    Grep for any remaining "/projects" references in src/ (excluding node_modules): should find zero hits in NavLinks, sitemap, or not-found. (github.ts and todoist.ts references are expected and unrelated.)
  </verify>
  <done>
    NavLinks renders 7 items (Home through Contact, no Projects). Sitemap generates zero /projects URLs and has no fetchAllProjects import. 404 page offers Home, Building Blocks, Apps, Contact as navigation options. Build and lint pass cleanly.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` passes with zero errors
2. `npm run lint` passes with zero errors
3. No `/projects` link in NavLinks baseLinks array
4. No `/projects` URL in sitemap.ts
5. No `fetchAllProjects` import in sitemap.ts
6. No "Projects" entry in not-found.tsx navigationLinks
7. `src/app/projects/` directory does not exist
8. `src/components/projects/` directory does not exist
9. next.config.ts contains redirect rules for `/projects` and `/projects/:slug`
</verification>

<success_criteria>
- Requirements NAV-01, NAV-02, NAV-03, NAV-04 are satisfied
- All project routes redirect to / via HTTP 301
- No broken internal links remain from the Projects removal
- Build succeeds, lint passes
</success_criteria>

<output>
After completion, create `.planning/phases/27-apps-first-home-schema-alignment/27-01-SUMMARY.md`
</output>
