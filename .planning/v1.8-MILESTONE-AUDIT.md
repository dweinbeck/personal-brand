---
milestone: v1.8
audited: 2026-02-12T16:30:00Z
status: passed
scores:
  requirements: 31/31
  phases: 5/5
  integration: 31/31
  flows: 4/4
gaps:
  requirements: []
  integration: []
  flows: []
tech_debt: []
---

# Milestone v1.8 Audit Report — Tasks App

**Milestone Goal:** Integrate the standalone todoist app into the personal-brand Apps ecosystem with weekly credit gating, and add effort scoring, demo workspace, and help tips to the todoist app itself.

**Audited:** 2026-02-12T16:30:00Z
**Status:** PASSED

## Phase Verification Summary

| Phase | Goal | Status | Score | Verified |
|-------|------|--------|-------|----------|
| 31: Help Tips | Accessible gold tooltip component with centralized catalog | ✓ Passed | 7/7 | 2026-02-11 |
| 32: Effort Scoring | Effort scores on tasks with section/project rollups | ✓ Passed | 12/12 | 2026-02-11 |
| 33: Multi-User + Auth | Firebase Auth and userId scoping across all data | ✓ Passed | 8/8 | 2026-02-12 |
| 34: Weekly Credit Gating | Billing API, server-enforced read-only, apps entry | ✓ Passed | 5/5 | 2026-02-12 |
| 35: Demo Workspace | Pre-populated client-side demo showcasing full feature set | ✓ Passed | 11/11 | 2026-02-12 |

**Total:** 43/43 observable truths verified across 5 phases

## Requirements Coverage

### Help Tips (TIPS-01 through TIPS-04)

| Requirement | Description | Phase | Status |
|-------------|-------------|-------|--------|
| TIPS-01 | Gold "?" icon next to key UI elements with contextual help | 31 | ✓ Satisfied |
| TIPS-02 | Accessible (ARIA tooltip role, keyboard focus, Escape dismiss) | 31 | ✓ Satisfied |
| TIPS-03 | Help tip content centralized in catalog file | 31 | ✓ Satisfied |
| TIPS-04 | Mobile tap-to-toggle, max-width, viewport-aware positioning | 31 | ✓ Satisfied |

### Effort Scoring (EFFORT-01 through EFFORT-05)

| Requirement | Description | Phase | Status |
|-------------|-------------|-------|--------|
| EFFORT-01 | Optional effort score (1, 2, 3, 5, 8, 13) on any task | 32 | ✓ Satisfied |
| EFFORT-02 | Visual effort selector in create/edit forms | 32 | ✓ Satisfied |
| EFFORT-03 | Section-level effort sum for incomplete tasks | 32 | ✓ Satisfied |
| EFFORT-04 | Project-level effort sum for incomplete tasks | 32 | ✓ Satisfied |
| EFFORT-05 | Unscored tasks display distinctly, excluded from rollups | 32 | ✓ Satisfied |

### Multi-User + Auth (AUTH-01 through AUTH-04)

| Requirement | Description | Phase | Status |
|-------------|-------------|-------|--------|
| AUTH-01 | Google Sign-In via Firebase Auth (same project as personal-brand) | 33 | ✓ Satisfied |
| AUTH-02 | Data scoped by userId — no cross-user visibility | 33 | ✓ Satisfied |
| AUTH-03 | All Prisma queries include userId filter | 33 | ✓ Satisfied |
| AUTH-04 | Server derives userId from verified Firebase token only | 33 | ✓ Satisfied |

### Weekly Credit Gating (BILL-01 through BILL-08)

| Requirement | Description | Phase | Status |
|-------------|-------------|-------|--------|
| BILL-01 | First week free from first access timestamp | 34 | ✓ Satisfied |
| BILL-02 | 100 credits/week charge after free week | 34 | ✓ Satisfied |
| BILL-03 | Read-only mode on insufficient credits (data visible, writes disabled) | 34 | ✓ Satisfied |
| BILL-04 | Server returns 402 on all mutation endpoints in read-only mode | 34 | ✓ Satisfied |
| BILL-05 | ReadOnlyBanner with "Buy Credits" CTA | 34 | ✓ Satisfied |
| BILL-06 | FreeWeekBanner during free trial week | 34 | ✓ Satisfied |
| BILL-07 | Idempotency key prevents double-charging | 34 | ✓ Satisfied |
| BILL-08 | tasks_app tool pricing entry in billing_tool_pricing | 34 | ✓ Satisfied |

### Apps Integration (APPS-01 through APPS-03)

| Requirement | Description | Phase | Status |
|-------------|-------------|-------|--------|
| APPS-01 | Tasks app on /apps page with correct metadata | 34 | ✓ Satisfied |
| APPS-02 | Links to deployed todoist service URL | 34 | ✓ Satisfied |
| APPS-03 | Sitemap includes tasks app entry | 34 | ✓ Satisfied |

### Demo Workspace (DEMO-01 through DEMO-05)

| Requirement | Description | Phase | Status |
|-------------|-------------|-------|--------|
| DEMO-01 | Unauthenticated visitor can view demo with 30-60 tasks across 3-5 projects | 35 | ✓ Satisfied |
| DEMO-02 | Demo showcases effort scores, subtasks, tags, multiple structures | 35 | ✓ Satisfied |
| DEMO-03 | Entirely client-side, no database writes or API calls | 35 | ✓ Satisfied |
| DEMO-04 | Persistent DEMO banner with CTA to sign up | 35 | ✓ Satisfied |
| DEMO-05 | All mutation UI disabled or shows feedback in demo mode | 35 | ✓ Satisfied |

### Testing (TEST-01 through TEST-02)

| Requirement | Description | Phase | Status |
|-------------|-------------|-------|--------|
| TEST-01 | Billing access check unit tests (enabled/disabled/free/paid/insufficient) | 34 | ✓ Satisfied |
| TEST-02 | Effort rollup computation unit tests (null handling, sums) | 32 | ✓ Satisfied |

**Coverage: 31/31 requirements satisfied (100%)**

## Cross-Phase Integration

Integration checker verified 31 of 31 key integration points across 87 files in 2 repos.

### Phase Dependency Chain (verified)

```
Phase 31 (Help Tips) ──┐
                       ├→ Phase 33 (Auth) ─→ Phase 34 (Billing) ─→ Phase 35 (Demo)
Phase 32 (Effort)  ────┘
```

### Critical Cross-Phase Wiring

| From → To | Integration Point | Status |
|-----------|-------------------|--------|
| 31 → 32 | HelpTip wired into effort toggle in project-view | ✓ Verified |
| 32 → 35 | Demo seed data includes effort scores (1-13 + null) | ✓ Verified |
| 33 → 34 | verifyUser() called before checkBillingAccess() in all actions | ✓ Verified |
| 34 → 35 | Demo layout does NOT import BillingProvider (by design) | ✓ Verified |
| 31+32 → 33 | Auth migration preserves help-tips/effort data | ✓ Verified |
| Cross-repo | todoist billing.ts → personal-brand /api/billing/tasks/access | ✓ Verified |

### E2E Flow Verification

| Flow | Steps | Status |
|------|-------|--------|
| New visitor → Sign in → Free week | /apps → task card → auth → free week banner → CRUD | ✓ Complete |
| Demo → Browse → Sign up | /demo → projects → effort/tags → Sign Up Free → auth | ✓ Complete |
| Read-only → Purchase → Restored | auth → expired trial → ReadOnlyBanner → Buy Credits → readwrite | ✓ Complete |
| Cross-service billing | action → checkBillingAccess → personal-brand API → debit/allow/deny | ✓ Complete |

**No broken flows, no missing connections, no orphaned exports.**

## Test Results

| Repo | Tests | Status |
|------|-------|--------|
| todoist | 27 tests (effort rollup, help tips, schemas, subtasks, today filter) | ✓ All pass |
| personal-brand | 33 tests (tasks access, credits, billing types) | ✓ All pass |
| **Total** | **60 tests** | **0 failures** |

## Anti-Patterns

No anti-patterns detected across any phase:
- Zero TODO/FIXME/HACK comments in new code
- Zero stub implementations
- Zero console.log-only handlers
- Zero placeholder data shipped

## Tech Debt

No tech debt items accumulated. All phases delivered complete implementations.

## Quality Gates

| Gate | Phase 31 | Phase 32 | Phase 33 | Phase 34 | Phase 35 |
|------|----------|----------|----------|----------|----------|
| Tests | ✓ | ✓ | ✓ | ✓ | ✓ |
| Lint | ✓ | ✓ | ✓ | ✓ | ✓ |
| Build | ✓ | ✓ | ✓ | ✓ | ✓ |
| Types | ✓ | ✓ | ✓ | ✓ | ✓ |

## Deployment Checklist

Pre-production items (not blockers — deployment configuration):

1. Set `BILLING_API_URL` env var in todoist Cloud Run deployment
2. Set `TASKS_APP_URL` env var in personal-brand deployment
3. Run `npm run db:push` in todoist after PostgreSQL provisioned
4. Seed `tasks_app` pricing in production Firestore (auto-seeded on first access)
5. Configure Firebase Auth authorized domains for production URLs

## Conclusion

Milestone v1.8 **PASSED** with 100% requirements coverage, zero integration gaps, and zero tech debt. All 5 phases verified independently, all cross-phase wiring confirmed, and all 4 E2E user flows traced end-to-end without breaks. 60 tests passing across both repos.

The Tasks App milestone successfully delivers:
- **Help Tips**: Accessible contextual tooltips with centralized catalog
- **Effort Scoring**: Fibonacci-scale effort estimates with rollup aggregation
- **Multi-User Auth**: Firebase Auth with complete data isolation
- **Weekly Credit Gating**: Cross-service billing with graceful degradation
- **Demo Workspace**: Client-side demo showcasing all features

---

*Audited: 2026-02-12T16:30:00Z*
*Auditor: Claude (audit-milestone orchestrator)*
