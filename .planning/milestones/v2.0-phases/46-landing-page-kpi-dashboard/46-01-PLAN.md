---
phase: 46-landing-page-kpi-dashboard
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/apps/tasks/page.tsx
  - src/components/tasks/TasksKpiCard.tsx
autonomous: true
requirements: [LP-01, LP-02, LP-03, LP-05, LP-06]

must_haves:
  truths:
    - "Landing page title reads 'Welcome to Tasks' in Playfair Display blue heading matching other app title styles"
    - "Subtitle text appears below the title"
    - "KPI card appears below the subtitle with 'Your Tasks at a Glance' heading"
    - "KPI card has three columns: stats, MIT task card, Next task cards"
    - "MIT and Next task cards use light tan background color"
  artifacts:
    - path: "src/app/apps/tasks/page.tsx"
      provides: "Landing page with updated title styling and KPI card integration"
      contains: "font-display.*text-primary"
    - path: "src/components/tasks/TasksKpiCard.tsx"
      provides: "KPI card component with three-column layout"
      contains: "Your Tasks at a Glance"
  key_links:
    - from: "src/app/apps/tasks/page.tsx"
      to: "src/components/tasks/TasksKpiCard.tsx"
      via: "component import"
      pattern: "import.*TasksKpiCard"
---

<objective>
Update the Tasks landing page title to match the standard app heading style (Playfair Display blue) and create the KPI card component with its three-column layout for stats, MIT task, and Next tasks.

Purpose: Users see a polished, consistent landing page that matches the design language of other apps (envelopes, billing) with a "Your Tasks at a Glance" dashboard card.
Output: Updated page.tsx with correct heading, new TasksKpiCard component with three-column layout accepting data props.
</objective>

<execution_context>
@/Users/dweinbeck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dweinbeck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/app/apps/tasks/page.tsx
@src/components/envelopes/KpiBox.tsx
@src/components/ui/Card.tsx
@src/lib/tasks/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TasksKpiCard component with three-column layout</name>
  <files>src/components/tasks/TasksKpiCard.tsx</files>
  <action>
Create a new server component `TasksKpiCard` at `src/components/tasks/TasksKpiCard.tsx`. This is NOT a "use client" component — it receives data via props from the server page.

**Props interface:**

```typescript
type TasksKpiCardProps = {
  completedYesterday: number;
  totalTasks: number;
  mitTask: { id: string; name: string; projectName: string | null } | null;
  nextTasks: { id: string; name: string; projectName: string | null }[];
};
```

**Layout — white card with blue text, three columns:**

Use the shared `Card` component from `@/components/ui/Card` with `variant="default"` and additional classes for styling. The card structure:

1. **Card title**: "Your Tasks at a Glance" — use `font-display text-lg font-semibold text-primary` (Playfair Display blue, matching the KpiBox pattern from envelopes).

2. **Three-column grid** using `grid grid-cols-1 md:grid-cols-3 gap-6` below the title:

   **Column 1 — Stats:**
   - "Tasks completed yesterday: {completedYesterday}" — use `text-sm text-text-secondary` for label, `text-2xl font-bold text-primary` for count.
   - "Current Total Tasks: {totalTasks}" — same styling pattern.
   - Stack them vertically with `space-y-4`.

   **Column 2 — MIT Task:**
   - A single compact card (envelope-sized) with light tan background `bg-[#f5f0e8]`.
   - Use a simple `div` with `rounded-xl p-4 bg-[#f5f0e8]` (NOT the shared Card component, since that adds border/shadow we don't want here).
   - Show a small label "MIT" at top in `text-xs font-semibold text-primary uppercase tracking-wide`.
   - Show `mitTask.name` in `text-sm font-medium text-text-primary`.
   - Show `mitTask.projectName` below in `text-xs text-text-tertiary` if available.
   - If `mitTask` is null, show "No MIT task" in `text-sm text-text-tertiary italic`.

   **Column 3 — Next Tasks:**
   - Two compact cards with same light tan background `bg-[#f5f0e8] rounded-xl p-4`.
   - Small label "Next" at top in `text-xs font-semibold text-primary uppercase tracking-wide` (only on the first card, or as a column header above both cards).
   - Each card shows task name and optional project name, same styling as MIT card.
   - If fewer than 2 next tasks exist, show placeholder "No next task" for missing slots.
   - Use `space-y-3` between the two cards.

**Important styling notes:**
- The overall card (white bg) comes from the Card component's default variant.
- Inner task cards are NOT Card components — they are simple divs with tan background.
- Match the general aesthetic of the envelopes KpiBox (clean, metric-focused).
  </action>
  <verify>
Run `npx tsc --noEmit` to verify the component type-checks.
Run `npm run lint` to verify no lint errors.
  </verify>
  <done>
TasksKpiCard.tsx exists at src/components/tasks/TasksKpiCard.tsx, exports a server component that accepts completedYesterday, totalTasks, mitTask, and nextTasks props, renders a three-column KPI card with the correct styling, and passes type checking and linting.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update landing page title styling and integrate KPI card</name>
  <files>src/app/apps/tasks/page.tsx</files>
  <action>
Modify the existing `src/app/apps/tasks/page.tsx` to:

1. **Update the title heading classes** from:
   `text-2xl font-bold text-text-primary font-[family-name:var(--font-display)] mb-2`
   to:
   `text-3xl font-bold text-primary font-display mb-2`

   This matches the pattern used in `BillingPage.tsx` (`text-3xl font-bold text-primary font-display`) and other app headings. The `font-display` utility class maps to the `--font-display` CSS variable (Playfair Display) — no need for the verbose `font-[family-name:var(--font-display)]` syntax.

2. **Keep the subtitle** paragraph exactly as is (the conditional text about workspaces).

3. **Import and render `TasksKpiCard`** below the subtitle, passing placeholder/zero data for now (Plan 02 will wire up real data):

   ```tsx
   import { TasksKpiCard } from "@/components/tasks/TasksKpiCard";
   ```

   For now, to make the page work without the data-fetching service (which Plan 02 adds), pass static placeholder props:
   ```tsx
   <TasksKpiCard
     completedYesterday={0}
     totalTasks={0}
     mitTask={null}
     nextTasks={[]}
   />
   ```

4. **Remove the redirect for unauthenticated users.** Currently the page does `if (!userId) redirect("/");`. Remove this — the layout.tsx already handles unauthenticated state via AuthGuard. The page should simply not show the KPI card for unauthenticated users (Plan 02 will handle this properly). For now, keep the userId check and conditionally render the KPI card only when userId exists.

5. **Widen the max-width** from `max-w-3xl` to `max-w-4xl` to accommodate the three-column KPI layout.

6. **Keep the empty workspace state** (the dashed border box with "Click the + button") as-is — it should appear below the KPI card when no workspaces exist.

The final page structure should be:
```
<div className="p-8 max-w-4xl mx-auto">
  <h1 ...>Welcome to Tasks</h1>
  <p ...>subtitle</p>
  {userId && <TasksKpiCard ... />}
  {!hasWorkspaces && <empty workspace prompt>}
</div>
```
  </action>
  <verify>
Run `npm run build` to verify the page builds successfully.
Run `npm run lint` to verify no lint errors.
  </verify>
  <done>
The landing page at /apps/tasks displays "Welcome to Tasks" in Playfair Display blue heading (text-3xl font-bold text-primary font-display), keeps the subtitle, renders the KPI card below it (with placeholder data), and no longer redirects unauthenticated users.
  </done>
</task>

</tasks>

<verification>
- `npm run build` completes without errors
- `npm run lint` passes
- The landing page renders with the updated blue Playfair Display heading
- The KPI card component exists and renders three columns with correct styling
</verification>

<success_criteria>
1. Title "Welcome to Tasks" uses `text-3xl font-bold text-primary font-display` matching other app heading patterns
2. Subtitle preserved below the title
3. TasksKpiCard component renders a white card with "Your Tasks at a Glance" heading and three-column layout
4. MIT and Next task inner cards use light tan background (`bg-[#f5f0e8]`)
5. Build and lint pass cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/46-landing-page-kpi-dashboard/46-01-SUMMARY.md`
</output>
