---
phase: 04-builder-inbox-discord-alerts
plan: 02
type: execute
wave: 2
depends_on: [04-01]
files_modified:
  - src/app/api/admin/builder-inbox/[id]/reroute/route.ts
  - src/app/api/admin/builder-inbox/[id]/retry/route.ts
  - src/components/admin/builder-inbox/CaptureDetailPage.tsx
autonomous: true
requirements:
  - INBOX-REROUTE
  - INBOX-RETRY

must_haves:
  truths:
    - "Re-route action changes capture destination and re-processes it"
    - "Retry action resets capture to pending and re-processes it"
    - "Both action routes use verifyAdmin for auth"
    - "CaptureDetailPage shows action buttons for re-route and retry"
    - "npm run build succeeds"
    - "npm run lint passes"
---

<objective>
Add re-route and retry actions to the Builder Inbox detail view. Admin can change a capture's destination or retry failed captures.

Purpose: Enables manual correction when LLM routing makes mistakes or when processing fails.

Output: 2 new API routes, 1 updated component.
</objective>

<execution_context>
@/Users/dweinbeck/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dweinbeck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@src/lib/gsd/router.ts
@src/lib/gsd/capture.ts
@src/components/admin/builder-inbox/CaptureDetailPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create re-route and retry API routes</name>
  <files>
    src/app/api/admin/builder-inbox/[id]/reroute/route.ts
    src/app/api/admin/builder-inbox/[id]/retry/route.ts
  </files>
  <action>
    Re-route: POST with { destination } body — manually sets destination and marks routed.
    Retry: POST — resets status to pending and calls processCapture.
  </action>
</task>

<task type="auto">
  <name>Task 2: Add action buttons to CaptureDetailPage</name>
  <files>
    src/components/admin/builder-inbox/CaptureDetailPage.tsx
  </files>
  <action>
    Add retry button (for failed/inbox captures) and re-route dropdown.
    Show success/error feedback after action.
  </action>
</task>

</tasks>

<verification>
1. npm run lint — zero errors
2. npm run build — zero errors
3. npm test — all tests pass
</verification>

<success_criteria>
- Re-route and retry actions work from capture detail view
- Actions protected with verifyAdmin
- UI feedback on action success/failure
</success_criteria>

<output>
After completion, create `.planning/phases/04-builder-inbox-discord-alerts/04-02-SUMMARY.md`
</output>
