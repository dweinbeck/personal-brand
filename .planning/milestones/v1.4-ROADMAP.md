# Milestone v1.4: Control Center â€” Content Editor & Brand Scraper

**Status:** Complete
**Phases:** 17-21 (including 19.1)
**Total Plans:** 8

## Overview

Expand the Control Center with two new admin tools: a form-guided Building Blocks content editor with live preview that writes MDX directly to the filesystem, and a Brand Scraper frontend that submits URLs to the deployed Cloud Run API and displays extracted brand data (colors, fonts, logos, assets) in a card gallery. Also adds a public Custom GPTs page with responsive card grid and Control Center navigation with horizontal nav bar.

## Phases

- [x] **Phase 17: Control Center Navigation** - Horizontal nav bar with active state and placeholder pages
- [x] **Phase 18: Content Editor Infrastructure** - Zod schemas, admin auth, saveTutorial Server Action, tutorial listing
- [x] **Phase 19: Content Editor UI** - Form-guided editor with live preview, fast companion support
- [x] **Phase 19.1: Custom GPTs Page** - Public page with responsive card grid and navigation entry
- [x] **Phase 20: Brand Scraper API Proxy** - Typed HTTP client, Zod schemas, admin-guarded API routes
- [x] **Phase 21: Brand Scraper UI** - SWR polling, gallery sub-components, confidence badges, download links

## Phase Details

### Phase 17: Control Center Navigation

**Goal**: Admin can navigate between all Control Center sections from any page
**Depends on**: Phase 16 (v1.3 shipped)
**Requirements**: Control Center navigation to switch between features
**Success Criteria** (what must be TRUE):
  1. Horizontal nav bar with Dashboard, Content Editor, and Brand Scraper links
  2. Active section highlighted with gold border and navy text
  3. Placeholder pages for new sections load without errors
  4. Build and lint pass cleanly
  5. ControlCenterNav component uses usePathname for active state
**Plans**: 1 plan

Plans:
- [x] 17-01-PLAN.md -- Create ControlCenterNav component, layout wrapper, and placeholder pages

---

### Phase 18: Content Editor Infrastructure

**Goal**: Server-side plumbing for content authoring (MDX file writing, validation, Zod schemas)
**Depends on**: Phase 17
**Requirements**: Editor writes MDX files directly to filesystem
**Success Criteria** (what must be TRUE):
  1. Zod schemas validate tutorial metadata (title, slug, description, tags, date)
  2. verifyAdminToken function validates Firebase ID tokens for Server Actions
  3. saveTutorial Server Action writes valid MDX files with 5-layer security pipeline
  4. Content listing page displays existing tutorials with title, slug, date, and tags
  5. Build, lint, and type checks pass
**Plans**: 2 plans

Plans:
- [x] 18-01-PLAN.md -- Create Zod schemas, verifyAdminToken, and saveTutorial Server Action
- [x] 18-02-PLAN.md -- Replace content page placeholder with tutorial listing table

---

### Phase 19: Content Editor UI

**Goal**: Form-guided editor with live preview and optional fast companion support
**Depends on**: Phase 18
**Requirements**: Building Blocks content editor with form-guided inputs and live preview tab, optional fast companion support
**Success Criteria** (what must be TRUE):
  1. Editor at `/control-center/content/new` with form fields for title, slug, description, tags, and markdown body
  2. Preview tab renders markdown via react-markdown with prose styling
  3. Save produces MDX files to disk matching published tutorial format
  4. Unsaved changes trigger browser beforeunload warning
  5. Fast companion toggle creates `_slug-fast.mdx` companion files
  6. "New Tutorial" link navigates from content listing page to editor
**Plans**: 1 plan

Plans:
- [x] 19-01-PLAN.md -- Build TutorialEditor client component with Edit/Preview tabs and fast companion support

---

### Phase 19.1: Custom GPTs Page

**Goal**: Public page displays Custom GPTs as a responsive card grid
**Depends on**: Phase 17 (navigation infrastructure)
**Requirements**: Custom GPTs page with responsive card grid
**Success Criteria** (what must be TRUE):
  1. `/custom-gpts` route renders with SEO metadata
  2. 2-column responsive card grid with GPT entries
  3. Cards link externally with `target="_blank"`
  4. Navigation entry appears between "Building Blocks" and "Assistant"
  5. Active nav state works correctly on the Custom GPTs page
  6. Data-driven from `custom-gpts.json` with typed loader
  7. Build, lint, and type checks pass
**Plans**: 1 plan

Plans:
- [x] 19.1-01-PLAN.md -- Create custom GPTs data file, typed loader, page component, and navigation entry

---

### Phase 20: Brand Scraper API Proxy

**Goal**: Typed HTTP client and API route proxies for Brand Scraper Fastify service
**Depends on**: Phase 17 (placeholder page exists)
**Requirements**: Brand Scraper URL collector, component cleanly separated for reuse
**Success Criteria** (what must be TRUE):
  1. POST `/api/admin/brand-scraper/scrape` accepts URL and returns job ID
  2. GET `/api/admin/brand-scraper/jobs/[id]` returns typed job status with BrandTaxonomy
  3. Both routes require admin auth (401/403 for unauthorized requests)
  4. Invalid upstream responses produce 502 errors with Zod validation
  5. `BRAND_SCRAPER_API_URL` never exposed to client-side code
**Plans**: 1 plan

Plans:
- [x] 20-01-PLAN.md -- Create Zod schemas, typed HTTP client, and admin-guarded API routes

---

### Phase 21: Brand Scraper UI

**Goal**: Admin can submit URLs, watch job progress, and browse extracted brand data
**Depends on**: Phase 20
**Requirements**: Brand Scraper results gallery with colors, fonts, logos, assets with confidence
**Success Criteria** (what must be TRUE):
  1. Job status updates automatically without manual refresh (SWR polling)
  2. Form submission displays job ID immediately
  3. Confidence badges show high/medium/low tiers as colored percentages
  4. Polling stops automatically on terminal states (succeeded/partial/failed)
  5. Status indicator distinguishes active from terminal states
  6. Unauthenticated users cannot submit requests
  7. 2-wide card gallery with colors, fonts, logos, and assets sections
  8. Color swatches show hex values with copy-to-clipboard
  9. Download links for brand.json and assets.zip
**Plans**: 2 plans

Plans:
- [x] 21-01-PLAN.md -- Add SWR hook, BrandTaxonomy schema, URL form, status indicator, and confidence badge
- [x] 21-02-PLAN.md -- Add results gallery sub-components, page orchestrator, and wire route page

---

## Progress

| Phase | Plans Complete | Status | Completed |
|-------|---------------|--------|-----------|
| 17. Control Center Navigation | 1/1 | Complete | 2026-02-08 |
| 18. Content Editor Infrastructure | 2/2 | Complete | 2026-02-08 |
| 19. Content Editor UI | 1/1 | Complete | 2026-02-08 |
| 19.1. Custom GPTs Page | 1/1 | Complete | 2026-02-09 |
| 20. Brand Scraper API Proxy | 1/1 | Complete | 2026-02-09 |
| 21. Brand Scraper UI | 2/2 | Complete | 2026-02-09 |
